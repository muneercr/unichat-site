{"version":3,"sources":["firebase.js","context/AuthContext.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","Provider","Chats","useContext","handleLogout","a","signOut","getFile","url","fetch","response","blob","data","File","type","axios","get","headers","process","email","uid","then","catch","formdata","FormData","append","photoURL","avatar","name","post","error","console","log","className","onClick","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","FacebookAuthProvider","App","style","fontFamily","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wNAMaA,G,MAAKC,IAASC,cAAc,CACrCC,OAAQ,0CACRC,WAAY,gCACZC,UAAW,gBACXC,cAAe,4BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBACdT,QCVCU,EAAYC,IAAMC,gBAGXC,EAAa,SAAC,GAAc,IAAbC,EAAY,EAAZA,SACxB,EAA2BC,oBAAS,GAApC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAqBF,mBAAS,MAA9B,mBAAOG,EAAP,KAAYC,EAAZ,KACMC,EAAQC,cAEdC,qBAAU,WACRtB,EAAKuB,oBAAmB,SAACL,GACrBC,EAAQD,GACRD,GAAW,GACTC,GAAKE,EAAQI,KAAK,eAEvB,CAACN,EAAKE,IAET,IAAMK,EAAM,CAACP,QAEb,OACI,kBAACR,EAAYgB,SAAb,CAAuBD,MAAOA,IACxBT,GAASF,I,iDC4DRa,EA7EH,WAER,IAAMP,EAAQC,cACPH,EDLcU,qBAAWlB,GCKzBQ,KACP,EAA8BH,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAIMY,EAAY,uCAAE,sBAAAC,EAAA,sEACR9B,EAAK+B,UADG,OAEdX,EAAQI,KAAK,KAFC,2CAAF,qDAKZQ,EAAO,uCAAC,WAAMC,GAAN,iBAAAH,EAAA,sEACWI,MAAMD,GADjB,cACJE,EADI,gBAEOA,EAASC,OAFhB,cAEJC,EAFI,yBAIH,IAAIC,KAAK,CAACD,GAAM,gBAAiB,CAACE,KAAK,gBAJpC,2CAAD,sDA2Cb,OAnCAjB,qBAAU,WACFJ,EAKJsB,IAAMC,IAAI,qCAAqC,CAC3CC,QAAQ,CACJ,aAAaC,uCACb,YAAYzB,EAAK0B,MACjB,cAAc1B,EAAK2B,OAGxBC,MAAK,WACJ7B,GAAW,MACZ8B,OAAM,WACL,IAAIC,EAAS,IAAIC,SACjBD,EAASE,OAAO,QAAQhC,EAAK0B,OAC7BI,EAASE,OAAO,WAAWhC,EAAK0B,OAChCI,EAASE,OAAO,SAAShC,EAAK2B,KAE9Bb,EAAQd,EAAKiC,UAAUL,MAAK,SAACM,GACzBJ,EAASE,OAAO,SAASE,EAAOA,EAAOC,MACvCb,IAAMc,KAAK,mCACXN,EACA,CAACN,QAAQ,CAAC,cAAcC,0CACtBG,MAAK,kBAAI7B,GAAW,MACrB8B,OAAM,SAACQ,GAAD,OAASC,QAAQC,IAAIF,YAzBhCnC,EAAQI,KAAK,OA+BlB,CAACN,EAAKE,KAELF,GAAQF,EAAe,aAGxB,yBAAK0C,UAAU,aACX,yBAAKA,UAAU,WACX,yBAAKA,UAAU,YAAf,WACA,yBAAKA,UAAU,aAAaC,QAAS9B,GAArC,WAGJ,kBAAC,IAAD,CACA+B,OAAO,qBACPC,UAAWlB,uCACXmB,SAAU5C,EAAK0B,MACfmB,WAAY7C,EAAK2B,QC5CbmB,EAxBH,WAER,OACI,yBAAKC,GAAG,cACJ,yBAAKA,GAAG,cACJ,iDACA,yBAAKP,UAAU,sBAAsBC,QAAS,kBAAI3D,EAAKkE,mBAAmB,IAAIjE,IAASD,KAAKmE,sBAExF,yCAFJ,uBAFJ,KAMY,6BAAM,6BACd,yBAAKT,UAAU,wBAAyBC,QAAS,kBAAI3D,EAAKkE,mBAAmB,IAAIjE,IAASD,KAAKoE,wBAE3F,2CAFJ,4BCMDC,MAff,WACE,OACE,yBAAKC,MAAO,CAAEC,WAAY,WACxB,kBAAC,IAAD,KACG,kBAAC,EAAD,KACC,kBAAC,IAAD,KACG,kBAAC,IAAD,CAAOC,KAAK,SAASC,UAAW9C,IACjC,kBAAC,IAAD,CAAO6C,KAAK,IAAIC,UAAWT,SCZvCU,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.e16b5f2a.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport 'firebase/auth'\r\n\r\n\r\n\r\n\r\nexport const auth=firebase.initializeApp({\r\n    apiKey: \"AIzaSyAXH8e3-SxhJXeHU-V_Ik_j0F6oFbBcJzY\",\r\n    authDomain: \"unichat-ceb7f.firebaseapp.com\",\r\n    projectId: \"unichat-ceb7f\",\r\n    storageBucket: \"unichat-ceb7f.appspot.com\",\r\n    messagingSenderId: \"556409886805\",\r\n    appId: \"1:556409886805:web:611fe86e210fbdd9205cdc\",\r\n    measurementId: \"G-MTTYHEKGJN\"\r\n  }).auth();","import React, { useContext,useEffect,useState } from  'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { auth } from '../firebase'\r\n\r\nconst AuthContext=React.createContext();\r\nexport const useAuth=()=>useContext(AuthContext);\r\n\r\nexport const AuthProvider=({children})=>{\r\n    const [loading,setLoading]=useState(true);\r\n    const [user,setUser]=useState(null);\r\n    const history=useHistory();\r\n\r\n    useEffect(() => {\r\n      auth.onAuthStateChanged((user)=>{\r\n          setUser(user)\r\n          setLoading(false)\r\n         if(user)history.push('/chats')\r\n      })\r\n    }, [user,history]);\r\n\r\n    const value={user}\r\n\r\n    return(\r\n        <AuthContext.Provider  value={value}>\r\n            {!loading&&children}\r\n\r\n        </AuthContext.Provider>\r\n    )\r\n\r\n}  ","import React,{useRef,useState,useEffect} from \"react\"\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { ChatEngine } from \"react-chat-engine\";\r\nimport {auth} from '../firebase'\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport axios from \"axios\";\r\n\r\nconst Chats=()=>{\r\n     \r\n    const history=useHistory();\r\n    const {user}=useAuth();\r\n    const [loading, setLoading] = useState('');\r\n    \r\n\r\n\r\n    const handleLogout= async()=>{\r\n          await auth.signOut();\r\n          history.push('/')\r\n\r\n    }\r\n    const getFile=async(url)  =>{\r\n        const response=await fetch(url)\r\n        const data=await response.blob();\r\n\r\n        return new File([data],\"userPhoto.jpg\", {type:\"image/jpeg\"})\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(!user){ \r\n            history.push('/')\r\n            return;\r\n        }\r\n      \r\n        axios.get(\"https://api.chatengine.io/users/me\",{\r\n            headers:{\r\n                \"project-id\":process.env.REACT_APP_CHAT_ENGINE_ID,\r\n                \"user-name\":user.email,\r\n                \"user-secret\":user.uid,\r\n\r\n            }\r\n        }).then(()=>{\r\n            setLoading(false)\r\n        }).catch(()=>{\r\n            let formdata=new FormData();\r\n            formdata.append(\"email\",user.email);\r\n            formdata.append(\"username\",user.email);\r\n            formdata.append(\"secret\",user.uid);\r\n\r\n            getFile(user.photoURL).then((avatar)=>{ \r\n                formdata.append(\"avatar\",avatar,avatar.name)\r\n                axios.post(\"https://api.chatengine.io/users/\",\r\n                formdata,\r\n                {headers:{\"private-key\":process.env.REACT_APP_CHAT_ENGINE_KEY}}\r\n                ).then(()=>setLoading(false))\r\n                .catch((error)=>console.log(error))\r\n\r\n            })\r\n\r\n        })\r\n     \r\n    }, [user,history]);\r\n\r\n    if(!user || loading)return 'Loading...'\r\n\r\n    return(\r\n       <div className=\"chat-page\">\r\n           <div className=\"nav-bar\">\r\n               <div className=\"logo-tab\">Unichat</div>\r\n               <div className=\"logout-tab\" onClick={handleLogout}>Logout</div>\r\n           </div>\r\n\r\n           <ChatEngine\r\n           height=\"calc(100vh - 66px)\"\r\n           projectID={process.env.REACT_APP_CHAT_ENGINE_ID}\r\n           userName={user.email}\r\n           userSecret={user.uid}\r\n           \r\n           />\r\n\r\n       </div>\r\n    )\r\n}\r\n\r\nexport default Chats;","import React from 'react'\r\nimport {googleOutlined,facebookOutlined} from '@ant-design/icons'\r\nimport 'firebase/app'\r\nimport { auth } from \"../firebase\"\r\nimport firebase from 'firebase/app'\r\n\r\n\r\n\r\nconst Login=()=>{\r\n\r\n    return(\r\n        <div id='login-page'>\r\n            <div id='login-card'>\r\n                <h2>Welcom to Unichat</h2>\r\n                <div className='login-button google' onClick={()=>auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}\r\n                >\r\n                    <googleOutlined/>sing in with google\r\n\r\n                </div>  <br /><br />\r\n                <div className='login-button facebook'  onClick={()=>auth.signInWithRedirect(new firebase.auth.FacebookAuthProvider())}\r\n                >\r\n                    <facebookOutlined/>sing in with facebook\r\n\r\n                </div> \r\n\r\n            </div>\r\n\r\n        </div>\r\n       \r\n    );\r\n}\r\n\r\nexport default Login;","import React from \"react\"\r\n\r\n\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\r\n\r\n import { AuthProvider } from \"../context/AuthContext\"\r\n\r\n import Chats from \"./Chats\"\r\n import Login from \"./Login\"\r\n\r\nfunction App() {\r\n  return (\r\n    <div style={{ fontFamily: 'Avenir' }}>\r\n      <Router>\r\n         <AuthProvider> \r\n          <Switch>\r\n             <Route path=\"/chats\" component={Chats} /> \r\n            <Route path=\"/\" component={Login} /> \r\n          </Switch>\r\n         </AuthProvider> \r\n      </Router>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}